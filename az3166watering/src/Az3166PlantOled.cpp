#include "Arduino.h"
#include "../inc/Az3166PlantOled.h"

#include <OledDisplay.h>

unsigned char flowerGood [] PROGMEM = {
	// 'flower_good, 32x32px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x0c, 0x18, 0x0e, 0x06, 0x0c, 0x18, 
	0x0c, 0x06, 0x1c, 0x30, 0x18, 0x8c, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0e, 0x18, 0x30, 0x20, 0x20, 0xe0, 
	0x60, 0x20, 0x20, 0x10, 0x1c, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x38, 0xf0, 0xa0, 0x60, 0x80, 0x00, 0xff, 
	0x00, 0x00, 0xc0, 0x60, 0xb0, 0x70, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0e, 0x31, 0x67, 0x7f, 
	0x7e, 0x63, 0x38, 0x0e, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

 unsigned char flowerBad [] PROGMEM = {
	// 'flower_bad, 32x32px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0xe0, 0x60, 0x40, 0x78, 0x18, 0x10, 0x38, 
	0x1c, 0x0c, 0x38, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x0d, 0x19, 0x30, 0x60, 0x40, 0xc0, 0xc0, 0xc0, 
	0x40, 0xe0, 0xb0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 
	0x88, 0x0f, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x06, 0x05, 0x0d, 0x1b, 0x36, 0x2c, 
	0x79, 0x73, 0x7e, 0x2c, 0x12, 0x09, 0x0d, 0x05, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

 unsigned char moon [] PROGMEM = {
	// 'icons8-crescent-moon-32, 32x32px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x80, 0x80, 0x40, 0x40, 0xa0, 
	0x60, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x1c, 0x02, 0x01, 0x00, 0x00, 0x38, 0xc7, 0x00, 
	0x00, 0x00, 0x10, 0x20, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x1c, 0x20, 0x40, 0x80, 0x00, 0x00, 0x00, 0x23, 
	0x52, 0x04, 0x08, 0x08, 0x08, 0x08, 0x08, 0x88, 0x44, 0x24, 0x1a, 0x03, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x02, 0x02, 
	0x02, 0x02, 0x02, 0x02, 0x02, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

 unsigned char sun [] PROGMEM = {
	// 'icons8-sun-32, 32x32px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 
	0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x01, 0x03, 0xe3, 0xf0, 0x38, 0x0c, 0x0e, 0x06, 0x06, 
	0x06, 0x06, 0x0e, 0x0c, 0x38, 0xf0, 0xe3, 0x03, 0x01, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x80, 0xc0, 0xc7, 0x0f, 0x1c, 0x30, 0x70, 0x60, 0x60, 
	0x60, 0x60, 0x70, 0x30, 0x1c, 0x0f, 0xc7, 0xc0, 0x80, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 
	0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

Az3166PlantOled::Az3166PlantOled()
{
	_waterPercentage = 0;
}

void Az3166PlantOled::InvalidateDisplay()
{
  Screen.print(0, "Plant Health");
  char buf[50];
  sprintf(buf, "%d hPa    %d%%", _pressure,_waterPercentage);
  Screen.print(3, buf);

  sprintf(buf, "%d C", _temperature);	
  Screen.print(2, buf);
  // Screen.print(3, "1000 hPa");
  sprintf(buf, "%d %%", _humidity);
  Screen.print(1, buf);

  Screen.draw(48, 2, 80 , 6, moon);

  if (_plantState == 0)
  	Screen.draw(96, 2, 128 , 6, flowerGood);
 else
  if (_plantState == 1)
  	Screen.draw(96, 2, 128 , 6, flowerBad);
 
  //  Screen.print(3, "12345678901234567890");

  //  Screen.draw(0, 2, 32 , 6, flower);
 // Screen.draw(40, 10, 128, 8, BMP);

 /*for(int i =0; i<=3; i++)
    {
        char buf[100];
        sprintf(buf, "This is row %d", i);
        Screen.print(i, buf);
    }*/
}

 void Az3166PlantOled::SetMoisturePercentage(int percentage)
 {
	 _waterPercentage = percentage;
 }

 void Az3166PlantOled::SetTemperature(int temperature)
 {
	 _temperature = temperature;
 }

 void Az3166PlantOled::SetHumidity(int humidity)
 {
	 _humidity = humidity;
 }

  void Az3166PlantOled::SetPressure(int pressure)
 {
	 _pressure = pressure;
 }

  void Az3166PlantOled::SetPlantState(int state)
 {
	 _plantState = state;
 }